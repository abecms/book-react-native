(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{149:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return s}));var a=n(1),r=n(9),o=(n(0),n(158)),i={},l={id:"setup/setup",title:"setup",description:"# Setup d'un nouveau projet mobile React native",source:"@site/docs/setup/setup.md",permalink:"/docs/setup/setup",sidebar:"docs",previous:{title:"exploitation",permalink:"/docs/setup/exploitation"},next:{title:"plugins",permalink:"/docs/config/plugins"}},c=[{value:"iOS",id:"ios",children:[{value:"Add the SDK to the project",id:"add-the-sdk-to-the-project",children:[]},{value:"Integrate the SDK",id:"integrate-the-sdk",children:[]},{value:"Modify the app&#39;s AppDelegate.m file to include code for starting SDK:",id:"modify-the-apps-appdelegatem-file-to-include-code-for-starting-sdk",children:[]},{value:"Explore data",id:"explore-data",children:[]}]},{value:"Android",id:"android",children:[{value:"Add the SDK to the project",id:"add-the-sdk-to-the-project-1",children:[]},{value:"Integrate the SDK",id:"integrate-the-sdk-1",children:[]},{value:"Explore data",id:"explore-data-1",children:[]}]},{value:"CheatSheet",id:"cheatsheet",children:[]},{value:"Styled components",id:"styled-components",children:[]},{value:"Cr\xe9er une app de d\xe9mo pour un store : Mode kiosk",id:"cr\xe9er-une-app-de-d\xe9mo-pour-un-store--mode-kiosk",children:[]}],p={rightToc:c};function s(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h1",{id:"setup-dun-nouveau-projet-mobile-react-native"},"Setup d'un nouveau projet mobile React native"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"npx react-native init")),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"npm i\ncd ios\npod install\n")),Object(o.b)("h1",{id:"d\xe9marrer-le-dev-sous-ios"},"D\xe9marrer le dev sous iOS"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"npx react-native run-ios")),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"npx react-native run-android")),Object(o.b)("h1",{id:"install-app-icons"},"Install app icons"),Object(o.b)("p",null,Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://medium.com/@scottianstewart/react-native-add-app-icons-and-launch-screens-onto-ios-and-android-apps-3bfbc20b7d4c"}),"https://medium.com/@scottianstewart/react-native-add-app-icons-and-launch-screens-onto-ios-and-android-apps-3bfbc20b7d4c")),Object(o.b)("h1",{id:"ajouter-des-polices"},"Ajouter des polices"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Il faut que le nom du fichier de la police corresponde exactement au nom de la police (ce qu'on a quand on clique bouton droit/info sur le fichier)"),Object(o.b)("li",{parentName:"ol"},"Une fois que les polices ttf sont dans un r\xe9pertoire, cr\xe9er le fichier react-native.config.js \xe0 la racine du projet")),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"module.exports = {\n    assets: ['./App/assets/fonts/']\n};\n")),Object(o.b)("ol",{start:3},Object(o.b)("li",{parentName:"ol"},Object(o.b)("inlineCode",{parentName:"li"},"react-native link")," pour les ajouter"),Object(o.b)("li",{parentName:"ol"},"on utilise une police en mettant")),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"import { createIconSetFromIcoMoon } from 'react-native-vector-icons';\nimport icoMoonConfig from './selection.json';\nconst Icon = createIconSetFromIcoMoon(\n  icoMoonConfig,\n  'LineAwesome',\n  'line-awesome.ttf'\n);\n")),Object(o.b)("h1",{id:"gestion-des-web-services"},"Gestion des Web services"),Object(o.b)("p",null,"Axios pour les appels HTTP (On pr\xe9f\xe8re Axios \xe0 fetch pour sa simplicit\xe9 et sa gestion des erreurs.)\nlodash comme outil de manipulation js\nhtml-entities pour manipuler les cha\xeenes HTML encod\xe9es"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"npm i --save axios html-entities lodash\n")),Object(o.b)("h1",{id:"microsoft-app-center"},"Microsoft App Center"),Object(o.b)("h2",{id:"ios"},"iOS"),Object(o.b)("h3",{id:"add-the-sdk-to-the-project"},"Add the SDK to the project"),Object(o.b)("p",null,"In a terminal window opened at the root of a React Native project, enter the following line to add Crash and Analytics services to your app:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"npm install appcenter appcenter-analytics appcenter-crashes --save-exact\n")),Object(o.b)("h3",{id:"integrate-the-sdk"},"Integrate the SDK"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Run pod install from iOS directory to install CocoaPods dependencies.")),Object(o.b)("p",null,"Note: Integrating the iOS SDK requires CocoaPods. If you want to integrate manually, follow these steps."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Create a new file with the name AppCenter-Config.plist with the following content. Don't forget to add this file to the Xcode project (right-click the app in Xcode and click Add files to ",Object(o.b)("inlineCode",{parentName:"li"},"<App Name>"),"...).")),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-xml"}),'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "https://www.apple.com/DTDs/PropertyList-1.0.dtd">\n<plist version="1.0">\n    <dict>\n    <key>AppSecret</key>\n    <string>secretkeyfromappcenter</string>\n    </dict>\n</plist>\n')),Object(o.b)("h3",{id:"modify-the-apps-appdelegatem-file-to-include-code-for-starting-sdk"},"Modify the app's AppDelegate.m file to include code for starting SDK:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Add these lines to import section")),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-swift"}),"#import <AppCenterReactNativeShared/AppCenterReactNativeShared.h>\n#import <AppCenterReactNative.h>\n#import <AppCenterReactNativeAnalytics.h>\n#import <AppCenterReactNativeCrashes.h>\n#import <AppCenterReactNativeShared/AppCenterReactNativeShared.h>\n#import <AppCenterReactNative.h>\n#import <AppCenterReactNativeAnalytics.h>\n#import <AppCenterReactNativeCrashes.h>\n")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Add these lines to the didFinishLaunchingWithOptions method")),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-swift"}),"[AppCenterReactNative register];\n[AppCenterReactNativeAnalytics registerWithInitiallyEnabled:true];\n[AppCenterReactNativeCrashes registerWithAutomaticProcessing];\n[AppCenterReactNative register];\n[AppCenterReactNativeAnalytics registerWithInitiallyEnabled:true];\n[AppCenterReactNativeCrashes registerWithAutomaticProcessing];\n")),Object(o.b)("h3",{id:"explore-data"},"Explore data"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Now build and launch your app, then go to the Analytics section."),Object(o.b)("li",{parentName:"ul"},"You should see one active user and at least one session! The charts will get more relevant as you get more users."),Object(o.b)("li",{parentName:"ul"},"Once your app actually crashes, you will have Crashes data show up as well.")),Object(o.b)("h2",{id:"android"},"Android"),Object(o.b)("h3",{id:"add-the-sdk-to-the-project-1"},"Add the SDK to the project"),Object(o.b)("p",null,"In a terminal window opened at the root of a React Native project, enter the following line to add Crash and Analytics services to your app:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"npm install appcenter appcenter-analytics appcenter-crashes --save-exact\nnpm install appcenter appcenter-analytics appcenter-crashes --save-exact\n")),Object(o.b)("h3",{id:"integrate-the-sdk-1"},"Integrate the SDK"),Object(o.b)("p",null,"Create a new file with the filename appcenter-config.json with the following content. Don't forget to add this file to the assets folder of your Android app."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'{\n  "app_secret": "6ec2cb7b-df06-48f5-8bc0-6a6d48c8be58"\n}\n')),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Modify the app's res/values/strings.xml to include the following lines:")),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'<string name="appCenterCrashes_whenToSendCrashes" moduleConfig="true" translatable="false">DO_NOT_ASK_JAVASCRIPT</string>\n<string name="appCenterAnalytics_whenToEnableAnalytics" moduleConfig="true" translatable="false">ALWAYS_SEND</string>\n<string name="appCenterCrashes_whenToSendCrashes" moduleConfig="true" translatable="false">DO_NOT_ASK_JAVASCRIPT</string>\n<string name="appCenterAnalytics_whenToEnableAnalytics" moduleConfig="true" translatable="false">ALWAYS_SEND</string>\n')),Object(o.b)("h3",{id:"explore-data-1"},"Explore data"),Object(o.b)("p",null,"Now build and launch your app, then go to the Analytics section. You should see one active user and at least one session! The charts will get more relevant as you get more users. Once your app actually crashes, you will have Crashes data show up as well."),Object(o.b)("h2",{id:"cheatsheet"},"CheatSheet"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Dans le channel slack #yoodoogood taper ",Object(o.b)("inlineCode",{parentName:"li"},"/appcenter build master")," pour builder et distribuer l'app dans TestFlight")),Object(o.b)("h2",{id:"styled-components"},"Styled components"),Object(o.b)("p",null,"Nous utilisons pour tous nos projets la librairie StyledComponents"),Object(o.b)("p",null,"Voici comment l'utiliser :\n1. Il faut analyser les components de l'app et pr\xe9parer les styles communs (comme Container, SafeView ...) qui se retrouveront dans Theme.js\n2. Cr\xe9er un r\xe9pertoire Styled et dans ce r\xe9pertoire d\xe9poser les fichiers de styles : Theme.js + un fichier par screen ou composant qui a besoin de ses propres styles. ex."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"Styled/\n  Theme.js\n  Screens/\n    Homepage.js\n    Download.js\n  Components/\n    Player/\n      Top.js\n      Middle.js\n      Bottom.js\n")),Object(o.b)("h2",{id:"cr\xe9er-une-app-de-d\xe9mo-pour-un-store--mode-kiosk"},"Cr\xe9er une app de d\xe9mo pour un store : Mode kiosk"),Object(o.b)("p",null,"Ce mode s'appelle ",Object(o.b)("inlineCode",{parentName:"p"},"Single App Mode"),'. Pour placer un iPad ou iPhone dans ce mode, il faut installer sur votre Mac "Apple Configurator".'),Object(o.b)("p",null,"Ce mode permet de bloquer l'iPad sur une seule app sans qu'il soit possible d'en sortir."),Object(o.b)("p",null,"Votre iPAd connect\xe9 en mode supervis\xe9 via un cable USB \xe0 votre Mac, ouvrez Apple Configurator et selectionnez le device. Cliquer sur le menu ",Object(o.b)("inlineCode",{parentName:"p"},"actions"),", puis ",Object(o.b)("inlineCode",{parentName:"p"},"Advanced")," et s\xe9lectionner ",Object(o.b)("inlineCode",{parentName:"p"},"Start Single App Mode"),". Vous pourrez ensuite choisir les options souhait\xe9es."),Object(o.b)("p",null,"Pour retirer ce mode de l'iPad, le reconnecter \xe0 votre Mac et retirer cette option depuis Apple Configurator."),Object(o.b)("h1",{id:"g\xe9n\xe9rer-une-ipa"},"G\xe9n\xe9rer une ipa"),Object(o.b)("p",null,"il faut :"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Un certificat iOS au format p12"),Object(o.b)("li",{parentName:"ul"},"Un provisionning profile"),Object(o.b)("li",{parentName:"ul"},"Xcode")))}s.isMDXComponent=!0},158:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=r.a.createContext({}),s=function(e){var t=r.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l({},t,{},e)),n},d=function(e){var t=s(e.components);return r.a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),d=s(n),b=a,m=d["".concat(i,".").concat(b)]||d[b]||u[b]||o;return n?r.a.createElement(m,l({ref:t},p,{components:n})):r.a.createElement(m,l({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=b;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);